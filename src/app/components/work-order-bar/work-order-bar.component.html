<!-- Work Order Bar — matches Sketch layout:
     [Name] ─────────── [Status Pill] [⋯]
     Three-dot trigger shown on hover, dropdown opens on click only -->

<div
  [ngClass]="['bar', statusClass(), menuOpen() ? 'menu-open' : '']"
  [style.left.px]="leftPx()"
  [style.width.px]="widthPx()"
  [title]="ariaLabel()"
  [attr.aria-label]="ariaLabel()"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
>
  <!-- Order name -->
  <span class="bar__name">{{ order().name }}</span>

  <!-- Status pill badge (inside bar, right side) -->
  <span class="bar__status-pill" [ngClass]="statusClass()">
    {{ order().status }}
  </span>

  <!-- Three-dot trigger + dropdown wrapper -->
  @if (hovered() || menuOpen()) {
    <div class="bar__menu-wrapper">
      <button
        class="bar__menu-trigger"
        aria-label="Open work order menu"
        [attr.aria-expanded]="menuOpen()"
        (click)="toggleMenu($event)"
      >
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <circle cx="12" cy="5" r="2" />
          <circle cx="12" cy="12" r="2" />
          <circle cx="12" cy="19" r="2" />
        </svg>
      </button>

      <!-- Dropdown — visible only after clicking the three-dot trigger -->
      @if (menuOpen()) {
        <div class="bar__menu-dropdown" (click)="$event.stopPropagation()">
          <button class="bar__menu-item" (click)="onEdit($event)">Edit</button>
          <button class="bar__menu-item bar__menu-item--danger" (click)="onDelete($event)">
            Delete
          </button>
        </div>
      }
    </div>
  }
</div>
